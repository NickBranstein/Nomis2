var Game=function(){function t(t,i,e){var n=this;this.context=t,this.width=i,this.height=e,this.context.canvas.addEventListener("click",function(t){n.click(t)}),this.sprites=[],this.renderer=new Engine.Renderer(t,i,e,function(t){n.renderWorld(t)});var r=new Engine.StartLevel(this);this.currentLevel=r}return t.prototype.start=function(){this.renderer.start()},t.prototype.stop=function(){this.renderer.stop()},t.prototype.renderWorld=function(t){this.currentLevel.render(this.context,t)},t.prototype.click=function(t){this.currentLevel.sprites.forEach(function(i){i.checkCollision(t.offsetX,t.offsetY)&&i.click(t)})},t}(),Engine;!function(t){var i=function(){function t(t,i,e,n){this.context=t,this.width=i,this.height=e,this.render=n}return t.prototype.start=function(){var t=this;this.running=!0,this.animationFrame=window.requestAnimationFrame(function(i){return t.renderLoop(i)})},t.prototype.renderLoop=function(t){var i=this;this.running&&(this.clear(),this.render(t),window.requestAnimationFrame(function(t){return i.renderLoop(t)}))},t.prototype.stop=function(){this.clear(),window.cancelAnimationFrame(this.animationFrame),this.running=!1},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t}();t.Renderer=i}(Engine||(Engine={}));var Engine;!function(t){var i=function(){function t(t,i,e,n,r,s,h,o){this.x=t,this.y=i,this.frameWidth=e,this.frameHeight=n,this.callback=o,this.image=new Image,this.image.src=r,this.currentFrame=0,this.frames=s,this.fps=h,this.lastTimestamp=0}return t.prototype.render=function(t,i){null!=this.lastTimestamp&&void 0!=this.lastTimestamp||(this.lastTimestamp=i);var e=i-this.lastTimestamp;null!=this.frames&&e>1e3/this.fps&&(this.animate(t),this.lastTimestamp=i),t.drawImage(this.image,this.currentFrame*this.frameWidth,0,this.frameWidth,this.image.height,this.x,this.y,this.frameWidth,this.image.height)},t.prototype.animate=function(t){this.currentFrame++,this.currentFrame>=this.frames&&(this.currentFrame=0)},t.prototype.checkCollision=function(t,i){return i>=this.y&&i<=this.y+this.frameHeight&&t>=this.x&&t<=this.x+this.frameWidth},t.prototype.click=function(t){console.log("Sprite Got Clicked"),null!=this.callback&&this.callback()},t}();t.Sprite=i}(Engine||(Engine={}));var Engine;!function(t){var i=function(){function t(t,i,e,n){this.x=t,this.y=i,this.text=e,this.callback=n}return t.prototype.render=function(t,i){this.height=30,t.font=this.height+"px Arial",t.fillText(this.text,this.x,this.y),this.width=t.measureText(this.text).width},t.prototype.checkCollision=function(t,i){return i>=this.y-this.height&&i<=this.y&&t>=this.x&&t<=this.x+this.width},t.prototype.click=function(t){console.log("Button Got Clicked"),null!=this.callback&&this.callback()},t}();t.Button=i}(Engine||(Engine={}));var Engine;!function(t){var i=function(){function i(i){this.sprites=[],this.sprites.push(new t.Button(50,900,"New Game",function(){console.log("new game callback")})),this.sprites.push(new t.Button(350,900,"Continue Game",function(){console.log("continue game callback")})),i.sprites=this.sprites}return i.prototype.render=function(t,i){var e=new Image;e.src="images/splash.png",t.drawImage(e,0,0),this.sprites.forEach(function(e){e.render(t,i)})},i}();t.StartLevel=i}(Engine||(Engine={}));